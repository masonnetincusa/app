<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Flappy Bird â€“ Auth & Admin Console</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">

  <!-- Press Start 2P Font -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap"
    rel="stylesheet"
  >

  <style>
    html, body {
      margin:0; padding:0;
      width:100%; height:100%;
      overflow:hidden; background:#000; color:#fff;
    }
    #game-container {
      position:relative; width:100%; height:100%;
    }
    canvas {
      display:block; width:100%; height:100%;
    }
    #score {
      position:absolute; top:10px; left:10px;
      font-family:'Press Start 2P',system-ui;
      font-size:48px; color:#fff;
      text-shadow:2px 2px 4px rgba(0,0,0,0.7);
      z-index:5;
    }
    #pauseBtn {
      position:absolute; top:10px; right:10px;
      display:none;
      background:#FF0000; border:none; color:#fff;
      padding:8px 16px; font-size:16px;
      cursor:pointer; z-index:6;
    }
    .overlay {
      position:absolute; top:0; left:0;
      width:100%; height:100%;
      background:rgba(0,0,0,0.85);
      display:flex; flex-direction:column;
      align-items:center; justify-content:center;
      text-align:center; font-family:Arial,sans-serif;
      z-index:10;
    }
    .hidden { display:none; }
    .overlay button {
      background:#FF0000; border:none; color:#fff;
      padding:12px 24px; margin:8px;
      font-size:16px; cursor:pointer;
    }
    #settings .setting-item {
      margin:16px 0; display:flex;
      flex-direction:column; align-items:center;
    }
    .setting-desc {
      margin-top:6px;
      font-size:14px; max-width:200px;
      color:#ddd;
    }
    .scroll-list {
      width:80%; max-height:200px;
      overflow-y:auto; text-align:left;
      margin:12px 0; color:#fff;
    }
    .scroll-list div {
      border-bottom:1px solid #444; padding:6px 0;
    }
    /* Login form */
    #loginOverlay input {
      display:block; width:200px; padding:6px;
      margin:8px 0; font-size:14px;
    }
  </style>
</head>
<body>
  <div id="game-container">
    <canvas id="canvas"></canvas>
    <div id="score">0</div>
    <button id="pauseBtn">Pause</button>

    <!-- Login Overlay -->
    <div id="loginOverlay" class="overlay hidden">
      <h2>Sign In</h2>
      <input id="loginEmail" type="text" placeholder="Email">
      <input id="loginPass"  type="password" placeholder="Password">
      <button id="loginSubmit">Sign In</button>
      <button id="loginCancel">Cancel</button>
      <p style="font-size:12px;color:#ccc; margin-top:12px;">
        Admin: admin@example.com / admin123<br>
        Public: user@example.com / user123
      </p>
    </div>

    <!-- Main Menu -->
    <div id="menuOverlay" class="overlay hidden">
      <img src="https://app.masonnet.org/fbrc.png"
           alt="Logo" style="width:240px;margin-bottom:24px;">
      <button id="startBtn">Start</button>
      <button id="leaderboardBtn">Leaderboard</button>
      <button id="settingsBtn">Settings</button>
      <button id="adminBtn" class="hidden">Admin Console</button>
      <button id="signOutBtn" class="hidden">Sign Out</button>
    </div>

    <!-- Leaderboard Overlay -->
    <div id="leaderboardOverlay" class="overlay hidden">
      <h2>Global Top 10</h2>
      <div id="leaderboardList" class="scroll-list"></div>
      <button id="backFromLbBtn">Back</button>
    </div>

    <!-- Settings Overlay -->
    <div id="settingsOverlay" class="overlay hidden">
      <h2>Settings</h2>

      <div class="setting-item">
        <button id="soundToggle">ðŸ”Š Sound</button>
        <p class="setting-desc">Toggle sound effects on or off.</p>
      </div>

      <div class="setting-item">
        <button id="themeToggle">ðŸŒ™ Dark Mode</button>
        <p class="setting-desc">Switch between light and dark backgrounds.</p>
      </div>

      <div class="setting-item">
        <button id="skipToggle">ðŸš€ Skip to Game Over: Off</button>
        <p class="setting-desc">
          Immediately triggers game over when enabled. This has no effect if sound is turned off. Game over SFX will not play if this is enabled.
        </p>
      </div>

      <div class="setting-item">
        <button id="authBtn">Sign In</button>
        <p class="setting-desc" id="authDesc">Sign in to access the admin console.</p>
      </div>

      <button id="closeSettingsBtn">Close</button>
    </div>

    <!-- Admin Console Overlay -->
    <div id="adminOverlay" class="overlay hidden">
      <h2>Feedback Submissions</h2>
      <div id="adminList" class="scroll-list"></div>
      <button id="closeAdminBtn">Back</button>
    </div>

    <!-- Pause Overlay -->
    <div id="pauseOverlay" class="overlay hidden">
      <h2>Paused</h2>
      <button id="resumeBtn">Resume</button>
      <button id="backFromPauseBtn">Main Menu</button>
    </div>

    <!-- Game Over Overlay -->
    <div id="gameoverOverlay" class="overlay hidden">
      <h2>Game Over</h2>
      <p>Your Score: <span id="finalScore">0</span></p>
      <button id="restartBtn">Restart</button>
      <button id="backFromGOBtn">Main Menu</button>
    </div>

    <!-- Sound Effect Overlay -->
    <div id="effectOverlay" class="overlay hidden">
      <h2>Playing sound effects...</h2>
    </div>
  </div>

  <!-- Firebase SDKs -->
  <script src="https://www.gstatic.com/firebasejs/9.16.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.16.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.16.0/firebase-database-compat.js"></script>

  <script>
  document.addEventListener('DOMContentLoaded', () => {
    // ---- CONSTANTS ----
    const OBSTACLE_WIDTH   = 60;
    const PIPE_GAP_MIN     = 120;
    const PIPE_GAP_MAX     = 200;
    const FLAP_COOLDOWN_MS = 200;
    const PARALLAX_SPEEDS  = [0.3, 0.8, 2];

    // Initialize Firebase
    firebase.initializeApp({
      apiKey: "AIzaSyDtfrpxKaROrq1D0NUAbFl0FZ9E7axOIxE",
      authDomain: "masonnet-app-official.firebaseapp.com",
      databaseURL: "https://masonnet-app-official-default-rtdb.firebaseio.com",
      projectId: "masonnet-app-official"
    });
    const auth  = firebase.auth();
    const db    = firebase.database();
    const lbRef = db.ref("leaderboard");
    const fbRef = db.ref("feedback");
    const roles = db.ref("roles");

    // UI references
    const loginOL      = document.getElementById("loginOverlay");
    const menuOL       = document.getElementById("menuOverlay");
    const lbOL         = document.getElementById("leaderboardOverlay");
    const settingsOL   = document.getElementById("settingsOverlay");
    const adminOL      = document.getElementById("adminOverlay");
    const pauseOL      = document.getElementById("pauseOverlay");
    const goOL         = document.getElementById("gameoverOverlay");
    const effectOL     = document.getElementById("effectOverlay");

    const canvas       = document.getElementById("canvas");
    const ctx          = canvas.getContext("2d");
    const scoreDiv     = document.getElementById("score");
    const pauseBtn     = document.getElementById("pauseBtn");

    const loginEmail   = document.getElementById("loginEmail");
    const loginPass    = document.getElementById("loginPass");
    const loginSubmit  = document.getElementById("loginSubmit");
    const loginCancel  = document.getElementById("loginCancel");

    const startBtn     = document.getElementById("startBtn");
    const lbBtn        = document.getElementById("leaderboardBtn");
    const settingsBtn  = document.getElementById("settingsBtn");
    const adminBtn     = document.getElementById("adminBtn");
    const authBtn      = document.getElementById("authBtn");
    const signOutBtn   = document.getElementById("signOutBtn");
    const restartBtn   = document.getElementById("restartBtn");

    const closeSettingsBtn = document.getElementById("closeSettingsBtn");
    const closeAdminBtn    = document.getElementById("closeAdminBtn");
    const backFromLbBtn    = document.getElementById("backFromLbBtn");
    const backFromPauseBtn = document.getElementById("backFromPauseBtn");
    const backFromGOBtn    = document.getElementById("backFromGOBtn");
    const resumeBtn        = document.getElementById("resumeBtn");

    const lbsList       = document.getElementById("leaderboardList");
    const adminList     = document.getElementById("adminList");
    const authDesc      = document.getElementById("authDesc");

    // Preload assets
    const lightBg  = new Image(), darkBg  = new Image();
    const birdImg  = new Image(), pipeImg  = new Image();
    lightBg.src    = "https://app.masonnet.org/lightbg.png";
    darkBg.src     = "https://app.masonnet.org/darkbg.png";
    birdImg.src    = "https://app.masonnet.org/bird.png";
    pipeImg.src    = "https://app.masonnet.org/pipe-green.png";
    const pointS   = new Audio("https://app.masonnet.org/point.mp3");
    const flapS    = new Audio("https://app.masonnet.org/flap.mp3");
    const hitS     = new Audio("https://app.masonnet.org/hit.mp3");
    const dieS     = new Audio("https://app.masonnet.org/die.mp3");

    Promise.all([
      new Promise(r=>lightBg.onload=r),
      new Promise(r=>darkBg.onload=r),
      new Promise(r=>birdImg.onload=r),
      new Promise(r=>pipeImg.onload=r)
    ]).then(init);

    function init(){
      // State
      let state         = "menu";
      let bird, pipes, score, frame, animId;
      let soundEnabled  = true;
      let darkMode      = false;
      let skipEnabled   = false;
      let bgImg         = lightBg;
      let collided      = false;
      let lastFlap      = 0;
      let parallaxOffs  = [0,0,0];
      let isAdmin       = false;

      // Resize canvas
      function resize(){
        canvas.width  = innerWidth;
        canvas.height = innerHeight;
      }
      window.addEventListener("resize",resize);
      resize();

      // Overlay helpers
      function hideAll(){
        [loginOL,menuOL,lbOL,settingsOL,adminOL,pauseOL,goOL,effectOL].forEach(o=>o.classList.add("hidden"));
        pauseBtn.style.display="none";
      }
      function show(id){
        hideAll();
        const map = {
          login:loginOL, menu:menuOL,
          leaderboard:lbOL, settings:settingsOL,
          admin:adminOL, pause:pauseOL,
          gameover:goOL, effect:effectOL
        };
        map[id].classList.remove("hidden");
        if(id==="menu") signOutBtn.classList.remove("hidden");
      }

      // Auth state listener
      auth.onAuthStateChanged(user=>{
        if(!user){
          isAdmin=false;
          authBtn.textContent="Sign In";
          authDesc.textContent="Sign in to access the admin console.";
          show("login");
          return;
        }
        // fetch role
        roles.child(user.uid).once("value",snap=>{
          isAdmin = snap.val()==="admin";
          adminBtn.classList.toggle("hidden",!isAdmin);
        });
        authBtn.textContent="Sign Out";
        authDesc.textContent="Signed in as "+user.email;
        show("menu");
      });

      // Login / logout
      loginSubmit.addEventListener("click",()=>{
        auth.signInWithEmailAndPassword(loginEmail.value,loginPass.value)
          .catch(e=>alert(e.message));
      });
      loginCancel.addEventListener("click",()=> show("settings"));
      authBtn.addEventListener("click",()=>{
        if(auth.currentUser) auth.signOut();
        else show("login");
      });
      signOutBtn.addEventListener("click",()=> auth.signOut());

      // Fetch leaderboard
      function renderLeaderboard(){
        lbsList.innerHTML="";
        lbRef.orderByChild("score").limitToLast(10)
          .once("value",snap=>{
          Object.values(snap.val()||{})
            .sort((a,b)=>b.score-a.score)
            .forEach((e,i)=>{
              const d=document.createElement("div");
              d.textContent=`${i+1}. ${e.name}: ${e.score}`;
              lbsList.appendChild(d);
            });
          show("leaderboard");
        });
      }

      // Fetch admin feedback
      function renderAdmin(){
        adminList.innerHTML="";
        fbRef.orderByChild("timestamp")
          .once("value",snap=>{
          Object.entries(snap.val()||{})
            .reverse()
            .forEach(([id,v])=>{
              const d=document.createElement("div");
              const t=new Date(v.timestamp).toLocaleString();
              d.innerHTML=`<strong>${v.type}</strong> â€“ ${v.subject}<br>${v.message}<br><em>${t}</em>`;
              adminList.appendChild(d);
            });
          show("admin");
        });
      }

      // Bind UI buttons
      document.getElementById("startBtn").onclick = startGame;
      lbBtn.onclick        = renderLeaderboard;
      settingsBtn.onclick  = ()=>show("settings");
      document.getElementById("closeSettingsBtn").onclick = ()=>show("menu");
      adminBtn.onclick     = renderAdmin;
      closeAdminBtn.onclick= ()=>show("menu");
      backFromLbBtn.onclick= ()=>show("menu");
      resumeBtn.onclick    = ()=>{ show("playing"); loop(); };
      backFromPauseBtn.onclick = ()=>show("menu");
      restartBtn.onclick   = startGame;
      backFromGOBtn.onclick= ()=>show("menu");

      // Controls
      window.addEventListener("keydown",e=>{
        if(e.code==="Space"&&state==="playing"){ bird.flap(); e.preventDefault(); }
        if(e.key==="k"     && state==="playing") pauseGame();
      });
      ['click','mousedown','touchstart'].forEach(evt=>{
        canvas.addEventListener(evt,e=>{
          if(state==="playing"){ bird.flap(); e.preventDefault(); }
        });
      });

      // Initialize UI
      updateSoundToggle(); updateThemeToggle(); updateSkipToggle();
      show("login");

      // --- Insert your full game logic here: startGame(), loop(), Bird class,
      //     spawnPipes(), scheduleGameOver(), performGameOver(), etc.
      //     Use `show("playing")` to display the canvas and pauseBtn,
      //     guard loop() with `state==="playing"`.
    }
  });
  </script>
</body>
</html>
```[43dcd9a7-70db-4a1f-b0ae-981daa162054](https://github.com/VictorMOPSena/senasoft-repositorio/tree/28ec22b0e9513981352093cd9011f7353aaabca8/actualizar_personal.php?citationMarker=43dcd9a7-70db-4a1f-b0ae-981daa162054 "1")[43dcd9a7-70db-4a1f-b0ae-981daa162054](https://github.com/moeclay/pdw24jam_entry/tree/9606afcd7eba27990562194ec25565c642e33eab/application%2Fviews%2Fdashboard%2Fpersonal_point.php?citationMarker=43dcd9a7-70db-4a1f-b0ae-981daa162054 "2")[43dcd9a7-70db-4a1f-b0ae-981daa162054](https://github.com/C4ArtZ/c4artz.de/tree/1f75c8dab7dd2cad9eb46e810fe223721f55ec3d/resources%2Fviews%2Fcomponents%2Fhttp-error.blade.php?citationMarker=43dcd9a7-70db-4a1f-b0ae-981daa162054 "3")
